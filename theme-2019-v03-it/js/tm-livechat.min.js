/*function listener(){
if (event.keyCode==13) {
document.getElementById("nick").style.display = "block";
document.getElementById("email").style.display = "block";
document.getElementById("submit").style.display = "block";
document.getElementById("question").style.display = "none";
document.getElementById("p11").style.display = "none";
document.getElementById("p22").style.display = "none";
}
}*/
/*
function listener(event){
var x = (event.charCode) ? event.charCode : ((event.which) ? event.which : event.keyCode);
if (x==13) {
document.getElementById("nick").style.display = "block";
document.getElementById("email").style.display = "block";
document.getElementById("submit").style.display = "block";
document.getElementById("question").style.display = "none";
document.getElementById("p11").style.display = "none";
document.getElementById("p22").style.display = "none";
}
}*/

function listener(){
document.getElementById("nick").style.display = "block";
document.getElementById("email").style.display = "block";
document.getElementById("submit").style.display = "block";
document.getElementById("goback").style.display = "block";
document.getElementById("question").style.display = "none";
document.getElementById("p11").style.display = "none";
document.getElementById("p22").style.display = "none";
document.getElementById("proceed").style.display = "none";
}

function gobackf(){
document.getElementById("nick").style.display = "none";
document.getElementById("email").style.display = "none";
document.getElementById("submit").style.display = "none";
document.getElementById("goback").style.display = "none";
document.getElementById("question").style.display = "block";
document.getElementById("p11").style.display = "block";
document.getElementById("p22").style.display = "block";
document.getElementById("proceed").style.display = "block";
}


(function(b){
   
      var d=0;
      
if("undefined"===typeof window.tmLivechatLoaded){var e=b.cookie("tm_livechat_steps")?parseInt(b.cookie("tm_livechat_steps")):0;
b.cookie("tm_livechat_steps",++e,{expires:1,path:"/"});
window.tmLivechatLoaded=!0}b.widget("tm.livechat",{version:"1.0.1",options:{actionUrl:"",title:"Need a Website?",startChatTitle:"Start Chat",content:"<p>Hi! Let me help you choose the right premium template.</p><p>What kind of website are you planning to make?<p>",mainColor:"",secondaryColor:"",
bgColor:"",textColor:"",period:7,minSteps:10,openAfter:7,dialogFloat:"center",overlay:!1,blinkPeriod:15,blinkFrequency:200,blinkCount:2},_getCreateOptions:function(){var a=this.element.find(".tm-livechat-content");
a.length&&"undefined"===typeof this.element.data("content")&&this.element.data("content",a.html());
this._dataOptions=b.extend({},this.element.data())},_create:function(){if(!b("body").find(this.element).length){var a=this.element.data("tm-livechat");
this.element=b(this.defaultElement).appendTo(b("body"));

this.element.data("tm-livechat",a)}this.element.addClass("tm-livechat");
this.element.empty();
this._prepareOptions();
this._setUniqueWidgetId();
this._generateStyles();
this._createForm();
this._createOpenBtn();
this._initData();
this._initWidget();
this._autoOpen();
this._blink();
this._trigger("init",null,{})},_prepareOptions:function(){b.extend(this.options,this._dataOptions);
this.options.period=parseInt(this.options.period);
this.options.minSteps=parseInt(this.options.minSteps);
this.options.openAfter=parseInt(this.options.openAfter);

this.options.blinkPeriod=parseInt(this.options.blinkPeriod);
this.options.blinkFrequency=parseInt(this.options.blinkFrequency);
this.options.blinkCount=parseInt(this.options.blinkCount)},_initData:function(){this._bodyEl=b("body");
this._dialog=this.element.find(".tm-livechat-dialog");
this._liveChatCloseEl=this.element.find(".tm-livechat-close");
this._chatBtnCloseEl=this.element.find(".tm-livechat-btn-close");
this._chatHeaderEl=this.element.find(".tm-livechat-close .tm-livechat-header");
this._form=this.element.find(".tm-livechat-form");



this._blinkInterval=this._isLiveChatOpened=!1},_createOpenBtn:function(){this.element.append('\t\t\t<div class="tm-livechat-close">\t\t\t    <div class="tm-livechat-header">\t\t\t        <p class="tm-livechat-title">'+this.options.title+'</p>\t\t\t        <a href="#open" class="tm-livechat-btn tm-livechat-btn-open"></a>\t\t\t    </div>\t\t\t</div>\t\t\t')},_createForm:function(){this.element.append('\t\t\t\t<div class="tm-livechat-dialog tm-livechat-float-'+this.options.dialogFloat+'">\t\t\t\t\t<form method="POST" action="'+this.options.actionUrl+'" class="tm-livechat-form">\t\t\t\t\t    <div class="tm-livechat-header">\t\t\t\t\t        <p class="tm-livechat-title">'+this.options.title+'</p>\t\t\t\t\t        <a href="#close" class="tm-livechat-btn tm-livechat-btn-close"></a>\t\t\t\t\t    </div>\t\t\t\t\t    <div class="tm-livechat-content">\t\t\t\t\t\t    <div class="tm-livechat-text">'+this.options.content+'<textarea style="width:100%; line-height:25px" rows="1" name="question" id="question" class="chat-question" placeholder="Scrivi qui" value=""></textarea>'
+'<input type="button" id="proceed" style="float:right; margin-top:5px; color:white" class="tm-livechat-btn-start" value="Inizia" onclick="listener()">'
+'<input type="text" name="nick" id="nick" class="chat-name" placeholder="il tuo nome" value="" style="display:none" required>'
+'<input type="email" name="email" id="email" class="chat-mail" placeholder="il tuo indirizzo email" value="" style="display:none" required>'
+'<input type="text" name="affID" id="affID" value="'+this.options.affId+'" style="display:none">'
+'<input type="text" name="presetCode" id="presetCode" value="'+this.options.presetCode+'" style="display:none">'
+'<input type="text" name="productType" id="productType" value="'+this.options.productType+'" style="display:none">'
+'<input type="text" name="templateId" id="templateId" value="'+this.options.templateId+'" style="display:none">'

+'</div>\t\t\t\t\t' + '<input type="button" id="goback" style="float:left; color:white; display:none" class="tm-livechat-btn-start" value="Indietro" onclick="gobackf()">' + '<input type="submit" id="submit" style="float:right; display:none" class="tm-livechat-btn-start" value="'+this.options.startChatTitle+
'">\t\t\t\t\t    </div>\t\t\t\t\t</form>\t\t\t\t</div>\t\t\t')},_initWidget:function(){var a=this;
this._dialog.draggable({start:function(){a._dialog.css({bottom:"inherit",right:"inherit"})}});
this._chatHeaderEl.on("click",function(b){b.preventDefault();
a._openDialog(!0)});
this._chatBtnCloseEl.on("click",function(b){b.preventDefault();
a._closeDialog()});
this._form[0].onsubmit=function(){var b="undefined"!==typeof screen;
window.open("about:blank","Popup_Window","toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=805,height=675,left = "+
(b?screen.width/2-402.5:312)+",top = "+(b?screen.height/2-337.5:234));
this.target="Popup_Window";
a._closeDialog()}},_openDialog:function(a){this._isLiveChatOpened=!0;
a="undefined"===typeof a?!1:a;
!a&&this.options.overlay&&("center"===this.options.dialogFloat||435>=b(window).width())&&this._bodyEl.addClass("tm-livechat-overlay");
this._liveChatCloseEl.hide();
this._dialog.show();
this._centerDialog(a);
"undefined"!==typeof this._blinkInterval&&this._blinkInterval&&clearInterval(this._blinkInterval);
b.cookie("tm_livechat_opened")||
b.cookie("tm_livechat_opened",1,{expires:1,path:"/"})},_closeDialog:function(){this.options.overlay&&this._bodyEl.removeClass("tm-livechat-overlay");
this._liveChatCloseEl.show();
this._dialog.hide()},_centerDialog:function(){this._dialog.is(":visible")&&("center"===this.options.dialogFloat||435>=b(window).width()?(this._dialog.css({bottom:"inherit",right:"inherit"}),this._dialog.css({top:b(window).height()/2-this._dialog.height()/2,left:b(window).width()/2-this._dialog.width()/2})):this._dialog.css({top:"",
left:"",bottom:"",right:""}))},_autoOpen:function(){if(!b.cookie("tm_livechat_auto_opened")&&e>=this.options.minSteps)var a=this,c=setTimeout(function(){a._isLiveChatOpened||(a._openDialog(),b.cookie("tm_livechat_auto_opened",1,{expires:a.options.period,path:"/"}));
clearTimeout(c)},1E3*this.options.openAfter)},_blink:function(){if(!b.cookie("tm_livechat_opened")&&this.options.blinkPeriod&&this.options.blinkFrequency&&this.options.blinkCount){var a=this,c;
this._blinkInterval=setInterval(function(){a._chatHeaderEl.addClass("tm-livechat-hover");

c=0;
var b=setInterval(function(){++c>=2*a.options.blinkCount?(a._chatHeaderEl.removeClass("tm-livechat-hover"),clearTimeout(b)):a._chatHeaderEl.hasClass("tm-livechat-hover")?a._chatHeaderEl.removeClass("tm-livechat-hover"):a._chatHeaderEl.addClass("tm-livechat-hover")},a.options.blinkFrequency)},1E3*this.options.blinkPeriod)}},_setUniqueWidgetId:function(){d++;
return this.options.uniqueId=d},_generateStyles:function(){var a="";
this.options.mainColor&&(a+=".tm-livechat .tm-livechat-header {background-color:"+
this.options.mainColor+"}",a+=".tm-livechat .tm-livechat-btn-start {background:"+this.options.mainColor+"}");
this.options.secondaryColor&&(a+=".tm-livechat .tm-livechat-btn-open {background-color:"+this.options.secondaryColor+"}",a+=".tm-livechat .tm-livechat-btn-close {background-color:"+this.options.secondaryColor+"}",a+=".tm-livechat .tm-livechat-btn-start:hover {background:"+this.options.secondaryColor+"}",a+=".tm-livechat .tm-livechat-close .tm-livechat-header:hover, .tm-livechat .tm-livechat-close .tm-livechat-header.tm-livechat-hover {background-color:"+
this.options.secondaryColor+"}");
this.options.bgColor&&(a+=".tm-livechat .tm-livechat-content {background-color:"+this.options.bgColor+"}");
this.options.textColor&&(a+=".tm-livechat .tm-livechat-text {color:"+this.options.textColor+"}");
a&&this.element.append(b("<style>",{type:"text/css",id:"tm-livechat-style-"+this.options.uniqueId,text:a}))}});


/*function handleEnter(e){
    var keycode = (e.keyCode ? e.keyCode : e.which);
    if (keycode == '13') {
      alert('You pressed enter! - plain javascript');
    }
}*/


b(document).ready(function(){b(".tm-livechat").livechat()})}

  

)(jQuery);